<?xml version="1.0"?>
<!-- -->
<launch>

	<!-- Switch between waypoint or dubins path mode with this argument -->
	<arg name="waypointmode" value="true"/>

	<!-- Launches the reef estimator -->
	<arg name="control_mode" value="altitude_hold"/>

	<arg name="vehicle" default="sim"/>
	<node name="reef_estimator" pkg="reef_estimator" type="reef_estimator" output="screen">
		<rosparam file="$(find reef_estimator)/params/xy_est_params.yaml" />
		<rosparam file="$(find reef_estimator)/params/z_est_params.yaml" />
		<rosparam file="$(find reef_estimator)/params/basic_params.yaml" />
                <rosparam>
                    enable_rgbd: false
                    enable_sonar: false
                    enable_mocap_xy: true
                    enable_mocap_z: true
                    estimator_dt: 0.005
                </rosparam>
		<remap from="mocap_ned" to="pose_stamped"/>
		<remap from="mocap_velocity/body_level_frame" to="velocity/body_level_frame"/>
		<remap from="rgbd_velocity_body_frame" to="rgbd_velocity/body_level_frame"/>
		<remap from="rc_raw" to="/mavros/rc/override"/>
		<remap from="imu/data" to="/mavros/imu/data"/>
		<remap from="status" to="/mavros/extended_state"/>
	</node>

	<!-- Launches the position to velocity node -->
	<rosparam command="load" file="$(find sim_helper)/params/sim_camera_to_body.yaml" />
	<node name="pose_to_vel" pkg="position_to_velocity" type="position_to_velocity_node" output="screen" >
		<rosparam command="load" file="$(find position_to_velocity)/params/basic.yaml" />
		<remap from="odom" to="multirotor/truth/NED"/> 
	</node>


</launch>
